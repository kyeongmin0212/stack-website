<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="자동매매 프로그램과 모의투자로 경제적 자유를 실현하세요." />
    <meta name="author" content="E-F Team" />
    <meta name="keywords" content="자동매매, 모의투자, 주식, 코인, 경제적 자유" />
    <title>E(conomic) - F(reedom) | 회원가입</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons -->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap) -->
    <link href="css/styles.css" rel="stylesheet" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #1a1a1a;
            color: #d1d4dc;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .auth-section {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 5px;
            max-width: 500px;
            margin: 0 auto;
        }
        .auth-section .form-control {
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
        }
        .auth-section .form-control:focus {
            background-color: #333;
            color: #fff;
            border-color: #666;
            box-shadow: none;
        }
        .auth-section .btn {
            width: 100%;
        }
        .container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* Menu 버튼 숨기기 */
        .navbar-toggler {
            display: none !important;
        }

        /* 네비게이션 바 메뉴 스타일 변경 */
        .navbar-nav {
            display: flex !important;
            flex-direction: row !important;
            position: fixed;
            right: 20px;
        }

        .navbar-collapse {
            display: flex !important;
            flex-basis: auto;
        }

        .navbar-brand {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            color: #fff !important;
            font-weight: bold;
            font-size: 3.2rem;
            margin-top: 100px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-light fixed-top" id="mainNav">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="index.html">E - F</a>
        </div>
    </nav>
    <!-- Sign-Up Section -->
    <div class="container py-5">
        <div class="auth-section">
            <h2 class="text-center mb-4">회원가입</h2>
            <form id="signupForm" onsubmit="handleSignup(event)">
                <div class="mb-3">
                    <label for="signupEmail" class="form-label">이메일</label>
                    <input type="email" class="form-control" id="signupEmail" placeholder="이메일을 입력하세요" required />
                </div>
                <div class="mb-3">
                    <label for="signupPassword" class="form-label">비밀번호</label>
                    <input type="password" class="form-control" id="signupPassword" placeholder="비밀번호를 입력하세요" required />
                </div>
                <div class="mb-3">
                    <label for="confirmPassword" class="form-label">비밀번호 확인</label>
                    <input type="password" class="form-control" id="confirmPassword" placeholder="비밀번호를 다시 입력하세요" required />
                </div>
                <button type="submit" class="btn btn-primary">회원가입</button>
                <div class="text-center mt-3">
                    <p>간편 회원가입</p>
                    <a href="http://localhost:3000/auth/naver"><img src="https://static.nid.naver.com/oauth/small_g_in.PNG" alt="네이버 로그인" style="height: 40px;" /></a>
                    <a href="http://localhost:3000/auth/kakao"><img src="/images/kakao_login_medium_narrow.png" alt="카카오 로그인" style="height: 40px;" /></a>
                </div>
            </form>
            <p class="text-center mt-3">이미 계정이 있으신가요? <a href="login.html">로그인</a></p>
        </div>
    </div>
    <!-- Footer -->
    <footer class="footer bg-black small text-center text-white-50">
        <div class="container px-4 px-lg-5">Copyright © E-F 2025</div>
    </footer>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS -->
    <script src="js/scripts.js"></script>
    <script>
        async function handleSignup(event) {
            event.preventDefault();
            const email = document.getElementById("signupEmail").value;
            const password = document.getElementById("signupPassword").value;
            const confirmPassword = document.getElementById("confirmPassword").value;
    
            if (password !== confirmPassword) {
                alert("비밀번호가 일치하지 않습니다.");
                return;
            }
    
            try {
                const response = await fetch('http://localhost:3000/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await response.json();
                if (response.ok) {
                    alert("회원가입이 완료되었습니다! 로그인 페이지로 이동합니다.");
                    window.location.href = "login.html";
                } else {
                    alert(data.message);
                }
            } catch (err) {
                alert("회원가입 중 오류가 발생했습니다.");
            }
        }
    </script>
</body>
</html>